import{l as P,e as b,r as o,o as n,c as r,t as u,g as y,b as t,a as e,x as d,_ as J,j as B,h as c,az as O,J as K,d as k,v as Q,F as W,i as X,w as Y,n as Z,z as S,p as j,q as ee,L as te}from"./main.b57b9d3d.js";const ae={key:0,class:"absolute mt-5 px-6 w-full flex justify-end"},se={key:0,class:"bg-white bg-opacity-75 text-xs px-3 py-1 font-semibold tracking-wide rounded"},ne={key:1,class:"ml-2 bg-white bg-opacity-75 text-xs px-3 py-1 font-semibold tracking-wide rounded"},le={key:0},oe={key:1},re=["src"],ie={class:"px-6 py-5 flex flex-col bg-gray-50 flex-1 justify-between"},de={class:"text-lg sm:text-2xl font-medium whitespace-nowrap truncate text-primary-500"},ce={key:0,class:"flex items-center mt-2"},ue=["src"],me={class:"ml-2 text-base font-semibold truncate"},_e={class:"flex justify-between mt-4 flex-col space-y-2 sm:space-y-0 sm:flex-row"},he={class:"text-xl md:text-2xl font-semibold whitespace-nowrap text-primary-500"},pe={__name:"ModuleCard",props:{data:{type:Object,default:null,required:!0}},setup(s){P();const l=s;let _=b(()=>parseInt(l.data.average_rating));return(i,m)=>{const h=o("base-text"),v=o("BaseRating");return n(),r("div",{class:"relative shadow-md border-2 border-gray-200 border-opacity-60 rounded-lg cursor-pointer overflow-hidden h-100",onClick:m[0]||(m[0]=w=>i.$router.push(`/admin/modules/${s.data.slug}`))},[s.data.purchased?(n(),r("div",ae,[s.data.purchased?(n(),r("label",se,u(i.$t("modules.purchased")),1)):y("",!0),s.data.installed?(n(),r("label",ne,[s.data.update_available?(n(),r("span",le,u(i.$t("modules.update_available")),1)):(n(),r("span",oe,u(i.$t("modules.installed")),1))])):y("",!0)])):y("",!0),t("img",{class:"lg:h-64 md:h-48 w-full object-cover object-center",src:s.data.cover,alt:"cover"},null,8,re),t("div",ie,[t("span",de,u(s.data.name),1),s.data.author_avatar?(n(),r("div",ce,[t("img",{class:"hidden h-10 w-10 rounded-full sm:inline-block mr-2",src:s.data.author_avatar?s.data.author_avatar:"http://localhost:3000/img/default-avatar.jpg",alt:""},null,8,ue),m[1]||(m[1]=t("span",null,"by",-1)),t("span",me,u(s.data.author_name),1)])):y("",!0),e(h,{text:s.data.short_description,class:"pt-4 text-gray-500 h-16 line-clamp-2",length:110},null,8,["text"]),t("div",_e,[t("div",null,[e(v,{rating:d(_)},null,8,["rating"])]),t("div",he," $ "+u(s.data.monthly_price?s.data.monthly_price/100:s.data.yearly_price/100),1)])])])}}},fe={},ge={class:"shadow-md border-2 border-gray-200 border-opacity-60 rounded-lg cursor-pointer overflow-hidden h-100"},ve={class:"px-6 py-5 flex flex-col bg-gray-50 flex-1 justify-between"},be={class:"flex items-center mt-2"},ye={class:"flex justify-between mt-4 flex-col space-y-2 sm:space-y-0 sm:flex-row"};function xe(s,l){const _=o("BaseContentPlaceholdersBox"),i=o("BaseContentPlaceholdersText"),m=o("BaseContentPlaceholders");return n(),B(m,null,{default:c(()=>[t("div",ge,[e(_,{class:"h-48 lg:h-64 md:h-48 w-full",rounded:""}),t("div",ve,[e(i,{class:"w-32 h-8",lines:1,rounded:""}),t("div",be,[e(_,{class:"h-10 w-10 rounded-full sm:inline-block mr-2"}),t("div",null,[e(i,{class:"w-32 h-8 ml-2",lines:1,rounded:""})])]),e(i,{class:"pt-4 w-full h-16",lines:1,rounded:""}),t("div",ye,[e(i,{class:"w-32 h-8",lines:1,rounded:""}),e(i,{class:"w-32 h-8",lines:1,rounded:""})])])])]),_:1})}var $=J(fe,[["render",xe]]);const ke={key:0},$e={key:0,class:"grid mt-6 w-full grid-cols-1 items-start gap-6 lg:grid-cols-2 xl:grid-cols-3"},Be={key:1},we={key:0,class:"grid mt-6 w-full grid-cols-1 items-start gap-6 lg:grid-cols-2 xl:grid-cols-3"},Te={key:1,class:"mt-24"},Ce={class:"flex items-center justify-center text-gray-500"},Ie={class:"text-gray-900 text-lg font-medium"},Se={class:"mt-1 text-sm text-gray-500"},je={class:"grid lg:grid-cols-2 mt-6"},Pe={class:"flex space-x-2"},Me=["href"],Ve={__name:"Index",setup(s){const l=O(),_=K(),i=k(""),{t:m}=P();let h=k(!1),v=k(!1);const w=b(()=>({api_token:{required:j.withMessage(m("validation.required"),ee),minLength:j.withMessage(m("validation.name_min_length",{count:3}),te(3))}})),M=b(()=>l.apiToken?(L(),!0):!1),p=Q(w,b(()=>l.currentUser)),x=b(()=>i.value==="INSTALLED"?l.modules.filter(a=>a.installed):l.modules);async function L(){v.value=!0,await l.fetchModules().then(()=>{v.value=!1})}async function V(){if(p.value.$touch(),p.value.$invalid)return!0;h.value=!0,l.checkApiToken(l.currentUser.api_token).then(a=>{if(a.data.success){G();return}h.value=!1})}async function G(){try{await _.updateGlobalSettings({data:{settings:{api_token:l.currentUser.api_token}},message:"settings.preferences.updated_message"}).then(a=>{if(a.data.success){l.apiToken=l.currentUser.api_token;return}}),h.value=!1}catch(a){h.value=!1,console.error(a);return}}function U(a){i.value=a.filter}return(a,f)=>{const T=o("BaseBreadcrumbItem"),q=o("BaseBreadcrumb"),A=o("BasePageHeader"),C=o("BaseTab"),N=o("BaseTabGroup"),D=o("BaseInput"),F=o("BaseInputGroup"),z=o("BaseIcon"),I=o("BaseButton"),E=o("BaseCard"),R=o("BasePage");return n(),B(R,null,{default:c(()=>[e(A,{title:a.$t("modules.title")},{default:c(()=>[e(q,null,{default:c(()=>[e(T,{title:a.$t("general.home"),to:"dashboard"},null,8,["title"]),e(T,{title:a.$tc("modules.module",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),M.value&&d(l).modules?(n(),r("div",ke,[e(N,{class:"-mb-5",onChange:U},{default:c(()=>[e(C,{title:a.$t("general.all"),filter:""},null,8,["title"]),e(C,{title:a.$t("modules.installed"),filter:"INSTALLED"},null,8,["title"])]),_:1}),d(v)?(n(),r("div",$e,[e($),e($),e($)])):(n(),r("div",Be,[x.value&&x.value.length?(n(),r("div",we,[(n(!0),r(W,null,X(x.value,(g,H)=>(n(),r("div",{key:H},[e(pe,{data:g},null,8,["data"])]))),128))])):(n(),r("div",Te,[t("label",Ce,u(a.$t("modules.no_modules_installed")),1)]))]))])):(n(),B(E,{key:1,class:"mt-6"},{default:c(()=>[t("h6",Ie,u(a.$t("modules.connect_installation")),1),t("p",Se,u(a.$t("modules.api_token_description",{url:d(_).config.base_url.replace(/^http:\/\//,"")})),1),t("div",je,[t("form",{action:"",class:"mt-6",onSubmit:Y(V,["prevent"])},[e(F,{label:a.$t("modules.api_token"),required:"",error:d(p).api_token.$error&&d(p).api_token.$errors[0].$message},{default:c(()=>[e(D,{modelValue:d(l).currentUser.api_token,"onUpdate:modelValue":f[0]||(f[0]=g=>d(l).currentUser.api_token=g),invalid:d(p).api_token.$error,onInput:f[1]||(f[1]=g=>d(p).api_token.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t("div",Pe,[e(I,{class:"mt-6",loading:d(h),type:"submit"},{left:c(g=>[e(z,{name:"SaveIcon",class:Z(g.class)},null,8,["class"])]),default:c(()=>[S(" "+u(a.$t("general.save")),1)]),_:1},8,["loading"]),t("a",{href:`${d(_).config.base_url}/auth/customer/register`,class:"mt-6 block",target:"_blank"},[e(I,{variant:"primary-outline",type:"button"},{default:c(()=>f[2]||(f[2]=[S(" Sign up & Get Token ")])),_:1})],8,Me)])],32)])]),_:1}))]),_:1})}}};export{Ve as default};
