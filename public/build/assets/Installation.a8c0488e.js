import{Z as _e,H as ae,A as W,$ as A,d as z,e as k,r as b,o as q,j as M,h as d,b as B,c as U,t as P,z as N,g as G,F as ie,i as oe,a as t,n as O,l as x,aa as ge,f as Q,x as e,ab as le,ac as re,K as j,a5 as te,p as h,q as V,at as ne,v as R,w as T,_ as se,u as de,a4 as ue,s as X,y as K,N as ve,L as be,ak as $e,a2 as we,J as pe,am as me,m as fe,aP as ye}from"./main.b57b9d3d.js";import{u as ee}from"./mail-driver.3bb58eec.js";const Y=(o=!1)=>{const D=o?window.pinia.defineStore:_e,S=ae();return D({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,app_url:window.location.origin}}),actions:{fetchInstallationRequirements(){return new Promise((n,s)=>{W.get("/api/v1/installation/requirements").then(a=>{n(a)}).catch(a=>{A(a),s(a)})})},fetchInstallationStep(){return new Promise((n,s)=>{W.get("/api/v1/installation/wizard-step").then(a=>{n(a)}).catch(a=>{A(a),s(a)})})},addInstallationStep(n){return new Promise((s,a)=>{W.post("/api/v1/installation/wizard-step",n).then(p=>{s(p)}).catch(p=>{A(p),a(p)})})},fetchInstallationPermissions(){return new Promise((n,s)=>{W.get("/api/v1/installation/permissions").then(a=>{n(a)}).catch(a=>{A(a),s(a)})})},fetchInstallationDatabase(n){return new Promise((s,a)=>{W.get("/api/v1/installation/database/config",{params:n}).then(p=>{s(p)}).catch(p=>{A(p),a(p)})})},addInstallationDatabase(n){return new Promise((s,a)=>{W.post("/api/v1/installation/database/config",n).then(p=>{s(p)}).catch(p=>{A(p),a(p)})})},addInstallationFinish(){return new Promise((n,s)=>{W.post("/api/v1/installation/finish").then(a=>{n(a)}).catch(a=>{A(a),s(a)})})},setInstallationDomain(n){return new Promise((s,a)=>{W.put("/api/v1/installation/set-domain",n).then(p=>{s(p)}).catch(p=>{A(p),a(p)})})},installationLogin(){return new Promise((n,s)=>{W.get("/sanctum/csrf-cookie").then(a=>{a&&W.post("/api/v1/installation/login").then(p=>{S.setSelectedCompany(p.data.company),n(p)}).catch(p=>{A(p),s(p)})})})},checkAutheticated(){return new Promise((n,s)=>{W.get("/api/v1/auth/check").then(a=>{n(a)}).catch(a=>{s(a)})})}}})()},he={class:"w-full md:w-2/3"},Ie={class:"mb-6"},qe={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},Ce={class:"col-span-2 text-sm"},Be={class:"text-right"},Ve={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},De={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Se={key:1},Fe={class:"col-span-2 text-sm"},Me={class:"text-right"},ze={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ke={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Ue={__name:"Step1RequirementsCheck",emits:["next"],setup(o,{emit:D}){const S=D,n=z(""),s=z(""),a=z(!1);z(!0);const p=Y(),c=k(()=>{if(n.value){let g=!0;for(const l in n.value)return n.value[l]||(g=!1),n.value&&s.value.supported&&g}return!1});async function v(){var l,I,i,u;a.value=!0;const g=await p.fetchInstallationRequirements();g.data&&(n.value=(i=(I=(l=g==null?void 0:g.data)==null?void 0:l.requirements)==null?void 0:I.requirements)==null?void 0:i.php,s.value=(u=g==null?void 0:g.data)==null?void 0:u.phpSupportInfo)}function r(){a.value=!0,S("next"),a.value=!1}return(g,l)=>{const I=b("BaseIcon"),i=b("BaseButton"),u=b("BaseWizardStep");return q(),M(u,{title:g.$t("wizard.req.system_req"),description:g.$t("wizard.req.system_req_desc")},{default:d(()=>[B("div",he,[B("div",Ie,[s.value?(q(),U("div",qe,[B("div",Ce,P(g.$t("wizard.req.php_req_version",{version:s.value.minimum})),1),B("div",Be,[N(P(s.value.current)+" ",1),s.value.supported?(q(),U("span",Ve)):(q(),U("span",De))])])):G("",!0),n.value?(q(),U("div",Se,[(q(!0),U(ie,null,oe(n.value,($,C)=>(q(),U("div",{key:C,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[B("div",Fe,P(C),1),B("div",Me,[$?(q(),U("span",ze)):(q(),U("span",ke))])]))),128))])):G("",!0)]),c.value?(q(),M(i,{key:0,onClick:r},{left:d($=>[t(I,{name:"ArrowRightIcon",class:O($.class)},null,8,["class"])]),default:d(()=>[N(P(g.$t("wizard.continue"))+" ",1)]),_:1})):G("",!0),n.value?G("",!0):(q(),M(i,{key:1,loading:a.value,disabled:a.value,onClick:v},{default:d(()=>[N(P(g.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},Pe={key:1,class:"relative"},Ne={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},Ee={class:"col-span-2 p-3"},Ge={class:"p-3 text-right"},xe={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},Oe={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},Le={__name:"Step2PermissionCheck",emits:["next"],setup(o,{emit:D}){const S=D;let n=z(!1),s=z(!1),a=z([]);const{tm:p,t:c}=x(),v=Y(),r=ge();Q(()=>{g()});async function g(){n.value=!0;const I=await v.fetchInstallationPermissions();a.value=I.data.permissions.permissions,I.data&&I.data.permissions.errors&&setTimeout(()=>{r.openDialog({title:p("wizard.permissions.permission_confirm_title"),message:c("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(i=>{i.data&&(n.value=!1)})},500),n.value=!1}function l(){s.value=!0,S("next"),s.value=!1}return(I,i)=>{const u=b("BaseContentPlaceholdersText"),$=b("BaseContentPlaceholdersBox"),C=b("BaseContentPlaceholders"),m=b("BaseIcon"),_=b("BaseButton"),f=b("BaseWizardStep");return q(),M(f,{title:I.$t("wizard.permissions.permissions"),description:I.$t("wizard.permissions.permission_desc")},{default:d(()=>[e(n)?(q(),M(C,{key:0},{default:d(()=>[(q(),U(ie,null,oe(3,(w,y)=>B("div",{key:y,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[t(u,{lines:1,class:"col-span-4 p-3"})])),64)),t($,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(q(),U("div",Pe,[(q(!0),U(ie,null,oe(e(a),(w,y)=>(q(),U("div",{key:y,class:"border border-gray-200"},[B("div",Ne,[B("div",Ee,P(w.folder),1),B("div",Ge,[w.isSet?(q(),U("span",xe)):(q(),U("span",Oe)),B("span",null,P(w.permission),1)])])]))),128)),le(t(_,{class:"mt-10",loading:e(s),disabled:e(s),onClick:l},{left:d(w=>[t(m,{name:"ArrowRightIcon",class:O(w.class)},null,8,["class"])]),default:d(()=>[N(" "+P(I.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[re,!e(n)]])]))]),_:1},8,["title","description"])}}},We={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Re={__name:"MysqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:D}){const S=o,n=D,s=j(["sqlite","mysql","pgsql"]),{t:a}=x(),p=te("utils"),c=Y();Q(()=>{for(const u in v.value)S.configData.hasOwnProperty(u)&&(v.value[u]=S.configData[u])});const v=k(()=>c.currentDataBaseData),r=u=>p.checkValidUrl(u),g={database_connection:{required:h.withMessage(a("validation.required"),V)},database_hostname:{required:h.withMessage(a("validation.required"),V)},database_port:{required:h.withMessage(a("validation.required"),V),numeric:ne},database_name:{required:h.withMessage(a("validation.required"),V)},database_username:{required:h.withMessage(a("validation.required"),V)},app_url:{required:h.withMessage(a("validation.required"),V),isUrl:h.withMessage(a("validation.invalid_url"),r)}},l=R(g,v.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;n("submit-data",v.value)}function i(){l.value.database_connection.$touch(),n("on-change-driver",v.value.database_connection)}return(u,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[B("div",We,[t(m,{label:u.$t("wizard.database.app_url"),error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.app_url,"onUpdate:modelValue":$[0]||($[0]=y=>v.value.app_url=y),invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(m,{label:u.$t("wizard.database.connection"),error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:v.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>v.value.database_connection=y),i],invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),t(m,{label:u.$t("wizard.database.port"),error:e(l).database_port.$error&&e(l).database_port.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_port,"onUpdate:modelValue":$[2]||($[2]=y=>v.value.database_port=y),invalid:e(l).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(m,{label:u.$t("wizard.database.db_name"),error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_name,"onUpdate:modelValue":$[3]||($[3]=y=>v.value.database_name=y),invalid:e(l).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(m,{label:u.$t("wizard.database.username"),error:e(l).database_username.$error&&e(l).database_username.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_username,"onUpdate:modelValue":$[4]||($[4]=y=>v.value.database_username=y),invalid:e(l).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(m,{label:u.$t("wizard.database.password")},{default:d(()=>[t(C,{modelValue:v.value.database_password,"onUpdate:modelValue":$[5]||($[5]=y=>v.value.database_password=y),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),t(m,{label:u.$t("wizard.database.host"),error:e(l).database_hostname.$error&&e(l).database_hostname.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_hostname,"onUpdate:modelValue":$[6]||($[6]=y=>v.value.database_hostname=y),invalid:e(l).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),t(w,{type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(y=>[o.isSaving?G("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(u.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)}}},Te={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ae={__name:"PgsqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:D}){const S=o,n=D,s=j(["sqlite","mysql","pgsql"]),{t:a}=x(),p=te("utils"),c=Y(),v=k(()=>c.currentDataBaseData);Q(()=>{for(const u in v.value)S.configData.hasOwnProperty(u)&&(v.value[u]=S.configData[u])});const r=u=>p.checkValidUrl(u),g={database_connection:{required:h.withMessage(a("validation.required"),V)},database_hostname:{required:h.withMessage(a("validation.required"),V)},database_port:{required:h.withMessage(a("validation.required"),V),numeric:ne},database_name:{required:h.withMessage(a("validation.required"),V)},database_username:{required:h.withMessage(a("validation.required"),V)},app_url:{required:h.withMessage(a("validation.required"),V),isUrl:h.withMessage(a("validation.invalid_url"),r)}},l=R(g,v.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;n("submit-data",v.value)}function i(){l.value.database_connection.$touch(),n("on-change-driver",v.value.database_connection)}return(u,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[B("div",Te,[t(m,{label:u.$t("wizard.database.app_url"),"content-loading":o.isFetchingInitialData,error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.app_url,"onUpdate:modelValue":$[0]||($[0]=y=>v.value.app_url=y),"content-loading":o.isFetchingInitialData,invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(m,{label:u.$t("wizard.database.connection"),"content-loading":o.isFetchingInitialData,error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:v.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>v.value.database_connection=y),i],"content-loading":o.isFetchingInitialData,invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),t(m,{label:u.$t("wizard.database.port"),"content-loading":o.isFetchingInitialData,error:e(l).database_port.$error&&e(l).database_port.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_port,"onUpdate:modelValue":$[2]||($[2]=y=>v.value.database_port=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(m,{label:u.$t("wizard.database.db_name"),"content-loading":o.isFetchingInitialData,error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_name,"onUpdate:modelValue":$[3]||($[3]=y=>v.value.database_name=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(m,{label:u.$t("wizard.database.username"),"content-loading":o.isFetchingInitialData,error:e(l).database_username.$error&&e(l).database_username.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_username,"onUpdate:modelValue":$[4]||($[4]=y=>v.value.database_username=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(m,{"content-loading":o.isFetchingInitialData,label:u.$t("wizard.database.password")},{default:d(()=>[t(C,{modelValue:v.value.database_password,"onUpdate:modelValue":$[5]||($[5]=y=>v.value.database_password=y),"content-loading":o.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),t(m,{label:u.$t("wizard.database.host"),"content-loading":o.isFetchingInitialData,error:e(l).database_hostname.$error&&e(l).database_hostname.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_hostname,"onUpdate:modelValue":$[6]||($[6]=y=>v.value.database_hostname=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),le(t(w,{"content-loading":o.isFetchingInitialData,type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(y=>[o.isSaving?G("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(u.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!o.isFetchingInitialData]])],32)}}},je={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ye={__name:"SqliteDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:D}){const S=o,n=D,s=j(["sqlite","mysql","pgsql"]),{t:a}=x(),p=te("utils"),c=Y(),v=k(()=>c.currentDataBaseData);Q(()=>{for(const u in v.value)S.configData.hasOwnProperty(u)&&(v.value[u]=S.configData[u])});const r=u=>p.checkValidUrl(u),g={database_connection:{required:h.withMessage(a("validation.required"),V)},database_name:{required:h.withMessage(a("validation.required"),V)},app_url:{required:h.withMessage(a("validation.required"),V),isUrl:h.withMessage(a("validation.invalid_url"),r)}},l=R(g,v.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;n("submit-data",v.value)}function i(){l.value.database_connection.$touch(),n("on-change-driver",v.value.database_connection)}return(u,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[B("div",je,[t(m,{label:u.$t("wizard.database.app_url"),"content-loading":o.isFetchingInitialData,error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:v.value.app_url,"onUpdate:modelValue":$[0]||($[0]=y=>v.value.app_url=y),"content-loading":o.isFetchingInitialData,invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(m,{label:u.$t("wizard.database.connection"),"content-loading":o.isFetchingInitialData,error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:v.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>v.value.database_connection=y),i],"content-loading":o.isFetchingInitialData,invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),t(m,{label:u.$t("wizard.database.db_path"),error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t(C,{modelValue:v.value.database_name,"onUpdate:modelValue":$[2]||($[2]=y=>v.value.database_name=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),le(t(w,{"content-loading":o.isFetchingInitialData,type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(y=>[o.isSaving?G("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(u.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!o.isFetchingInitialData]])],32)}}},Ze={components:{Mysql:Re,Pgsql:Ae,Sqlite:Ye},emits:["next"],setup(o,{emit:D}){const S=z("mysql"),n=z(!1),{t:s}=x(),a=de(),p=Y(),c=k(()=>p.currentDataBaseData);async function v(g){let l={connection:g};const I=await p.fetchInstallationDatabase(l);I.data.success&&(c.value.database_connection=I.data.config.database_connection),g==="sqlite"?c.value.database_name=I.data.config.database_name:c.value.database_name=null}async function r(g){n.value=!0;try{let l=await p.addInstallationDatabase(g);if(n.value=!1,l.data.success){await p.addInstallationFinish(),D("next",3),a.showNotification({type:"success",message:s("wizard.success."+l.data.success)});return}else if(l.data.error){if(l.data.requirement){a.showNotification({type:"error",message:s("wizard.errors."+l.data.error,{version:l.data.requirement.minimum,name:g.value.database_connection})});return}a.showNotification({type:"error",message:s("wizard.errors."+l.data.error)})}else l.data.errors?a.showNotification({type:"error",message:l.data.errors[0]}):l.data.error_message&&a.showNotification({type:"error",message:l.data.error_message})}catch{a.showNotification({type:"error",message:s("validation.something_went_wrong")}),n.value=!1}finally{n.value=!1}}return{databaseData:c,database_connection:S,isSaving:n,getDatabaseConfig:v,next:r}}};function Je(o,D,S,n,s,a){const p=b("BaseWizardStep");return q(),M(p,{title:o.$t("wizard.database.database"),description:o.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:d(()=>[(q(),M(ue(n.databaseData.database_connection),{"config-data":n.databaseData,"is-saving":n.isSaving,onOnChangeDriver:n.getDatabaseConfig,onSubmitData:n.next},null,40,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}var Ke=se(Ze,[["render",Je]]);const He={class:"w-full md:w-2/3"},Qe={__name:"Step4VerifyDomain",emits:["next"],setup(o,{emit:D}){const S=D,n=j({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),s=z(!1),{t:a}=x(),p=te("utils"),c=i=>p.checkValidDomainUrl(i),v=Y(),r=de(),g={app_domain:{required:h.withMessage(a("validation.required"),V),isUrl:h.withMessage(a("validation.invalid_domain_url"),c)}},l=R(g,k(()=>n));async function I(){if(l.value.$touch(),l.value.$invalid)return!0;s.value=!0;try{await v.setInstallationDomain(n),await v.installationLogin(),(await v.checkAutheticated()).data&&S("next",4),s.value=!1}catch{r.showNotification({type:"error",message:a("wizard.verify_domain.failed")}),s.value=!1}}return(i,u)=>{const $=b("BaseInput"),C=b("BaseInputGroup"),m=b("BaseButton"),_=b("BaseWizardStep");return q(),M(_,{title:i.$t("wizard.verify_domain.title"),description:i.$t("wizard.verify_domain.desc")},{default:d(()=>[B("div",He,[t(C,{label:i.$t("wizard.verify_domain.app_domain"),error:e(l).app_domain.$error&&e(l).app_domain.$errors[0].$message,required:""},{default:d(()=>[t($,{modelValue:n.app_domain,"onUpdate:modelValue":u[0]||(u[0]=f=>n.app_domain=f),invalid:e(l).app_domain.$error,type:"text",onInput:u[1]||(u[1]=f=>e(l).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),u[2]||(u[2]=B("p",{class:"mt-4 mb-0 text-sm text-gray-600"},"Notes:",-1)),u[3]||(u[3]=B("ul",{class:"w-full text-gray-600 list-disc list-inside"},[B("li",{class:"text-sm leading-8"},[N(" App domain should not contain "),B("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://"),N(" or "),B("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http"),N(" in front of the domain. ")]),B("li",{class:"text-sm leading-8"},[N(" If you're accessing the website on a different port, please mention the port. For example: "),B("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080")])],-1)),t(m,{loading:s.value,disabled:s.value,class:"mt-8",onClick:I},{default:d(()=>[N(P(i.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},Xe={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ea={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},aa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ta={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},na={__name:"SmtpMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:D}){const S=D;let n=z(!1);const s=j(["tls","ssl","starttls"]),{t:a}=x(),p=ee(),c=k(()=>p.smtpConfig),v=k(()=>n.value?"text":"password");c.value.mail_driver="smtp";const r=k(()=>({smtpConfig:{mail_driver:{required:h.withMessage(a("validation.required"),V)},mail_host:{required:h.withMessage(a("validation.required"),V)},mail_port:{required:h.withMessage(a("validation.required"),V),numeric:h.withMessage(a("validation.numbers_only"),ne)},mail_encryption:{required:h.withMessage(a("validation.required"),V)},from_mail:{required:h.withMessage(a("validation.required"),V),email:h.withMessage(a("validation.email_incorrect"),X)},from_name:{required:h.withMessage(a("validation.required"),V)}}})),g=R(r,k(()=>p));async function l(){return g.value.$touch(),g.value.$invalid||S("submit-data",p.smtpConfig),!1}function I(){g.value.smtpConfig.mail_driver.$touch(),S("on-change-driver",p.smtpConfig.mail_driver)}return(i,u)=>{const $=b("BaseMultiselect"),C=b("BaseInputGroup"),m=b("BaseInput"),_=b("BaseIcon"),f=b("BaseButton");return q(),U("form",{onSubmit:T(l,["prevent"])},[B("div",Xe,[t(C,{label:i.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(g).smtpConfig.mail_driver.$error&&e(g).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t($,{modelValue:c.value.mail_driver,"onUpdate:modelValue":[u[0]||(u[0]=w=>c.value.mail_driver=w),I],options:e(p).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData,invalid:e(g).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:i.$t("wizard.mail.host"),"content-loading":o.isFetchingInitialData,error:e(g).smtpConfig.mail_host.$error&&e(g).smtpConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[t(m,{modelValue:c.value.mail_host,"onUpdate:modelValue":u[1]||(u[1]=w=>c.value.mail_host=w),modelModifiers:{trim:!0},invalid:e(g).smtpConfig.mail_host.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_host",onInput:u[2]||(u[2]=w=>e(g).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ea,[t(C,{label:i.$t("wizard.mail.username"),"content-loading":o.isFetchingInitialData},{default:d(()=>[t(m,{modelValue:c.value.mail_username,"onUpdate:modelValue":u[3]||(u[3]=w=>c.value.mail_username=w),modelModifiers:{trim:!0},"content-loading":o.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),t(C,{label:i.$t("wizard.mail.password"),"content-loading":o.isFetchingInitialData},{default:d(()=>[t(m,{modelValue:c.value.mail_password,"onUpdate:modelValue":u[6]||(u[6]=w=>c.value.mail_password=w),modelModifiers:{trim:!0},type:v.value,"content-loading":o.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:d(()=>[e(n)?(q(),M(_,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:u[4]||(u[4]=w=>K(n)?n.value=!e(n):n=!e(n))})):(q(),M(_,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:u[5]||(u[5]=w=>K(n)?n.value=!e(n):n=!e(n))}))]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),B("div",aa,[t(C,{label:i.$t("wizard.mail.port"),error:e(g).smtpConfig.mail_port.$error&&e(g).smtpConfig.mail_port.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t(m,{modelValue:c.value.mail_port,"onUpdate:modelValue":u[7]||(u[7]=w=>c.value.mail_port=w),modelModifiers:{trim:!0},invalid:e(g).smtpConfig.mail_port.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_port",onInput:u[8]||(u[8]=w=>e(g).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(C,{label:i.$t("wizard.mail.encryption"),error:e(g).smtpConfig.mail_encryption.$error&&e(g).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t($,{modelValue:c.value.mail_encryption,"onUpdate:modelValue":u[9]||(u[9]=w=>c.value.mail_encryption=w),modelModifiers:{trim:!0},options:s,"can-deselect":!1,invalid:e(g).smtpConfig.mail_encryption.$error,"content-loading":o.isFetchingInitialData,onInput:u[10]||(u[10]=w=>e(g).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),B("div",ta,[t(C,{label:i.$t("wizard.mail.from_mail"),error:e(g).smtpConfig.from_mail.$error&&e(g).smtpConfig.from_mail.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t(m,{modelValue:c.value.from_mail,"onUpdate:modelValue":u[11]||(u[11]=w=>c.value.from_mail=w),modelModifiers:{trim:!0},invalid:e(g).smtpConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_mail",onInput:u[12]||(u[12]=w=>e(g).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(C,{label:i.$t("wizard.mail.from_name"),error:e(g).smtpConfig.from_name.$error&&e(g).smtpConfig.from_name.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t(m,{modelValue:c.value.from_name,"onUpdate:modelValue":u[13]||(u[13]=w=>c.value.from_name=w),modelModifiers:{trim:!0},invalid:e(g).smtpConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_name",onInput:u[14]||(u[14]=w=>e(g).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),t(f,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(w=>[o.isSaving?G("",!0):(q(),M(_,{key:0,name:"SaveIcon",class:O(w.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(i.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},ia={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},la={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ra={__name:"MailgunMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:D}){const S=D;let n=z(!1);const s=ee(),{t:a}=x(),p=k(()=>s.mailgunConfig),c=k(()=>n.value?"text":"password");p.value.mail_driver="mailgun";const v=k(()=>({mailgunConfig:{mail_driver:{required:h.withMessage(a("validation.required"),V)},mail_mailgun_domain:{required:h.withMessage(a("validation.required"),V)},mail_mailgun_endpoint:{required:h.withMessage(a("validation.required"),V)},mail_mailgun_secret:{required:h.withMessage(a("validation.required"),V)},from_mail:{required:h.withMessage(a("validation.required"),V),email:X},from_name:{required:h.withMessage(a("validation.required"),V)}}})),r=R(v,k(()=>s));function g(){return r.value.$touch(),r.value.$invalid||S("submit-data",s.mailgunConfig),!1}function l(){r.value.mailgunConfig.mail_driver.$touch(),S("on-change-driver",s.mailgunConfig.mail_driver)}return(I,i)=>{const u=b("BaseMultiselect"),$=b("BaseInputGroup"),C=b("BaseInput"),m=b("BaseIcon"),_=b("BaseButton");return q(),U("form",{onSubmit:T(g,["prevent"])},[B("div",ia,[t($,{label:I.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_driver.$error&&e(r).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(u,{modelValue:p.value.mail_driver,"onUpdate:modelValue":[i[0]||(i[0]=f=>p.value.mail_driver=f),l],options:e(s).mail_drivers,"can-deselect":!1,invalid:e(r).mailgunConfig.mail_driver.$error,"content-loading":o.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.mailgun_domain"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_domain.$error&&e(r).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:p.value.mail_mailgun_domain,"onUpdate:modelValue":i[1]||(i[1]=f=>p.value.mail_mailgun_domain=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_domain.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:i[2]||(i[2]=f=>e(r).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",oa,[t($,{label:I.$t("wizard.mail.mailgun_secret"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_secret.$error&&e(r).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:p.value.mail_mailgun_secret,"onUpdate:modelValue":i[5]||(i[5]=f=>p.value.mail_mailgun_secret=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_secret.$error,type:c.value,"content-loading":o.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:i[6]||(i[6]=f=>e(r).mailgunConfig.mail_mailgun_secret.$touch())},{right:d(()=>[e(n)?(q(),M(m,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:i[3]||(i[3]=f=>K(n)?n.value=!e(n):n=!e(n))})):(q(),M(m,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:i[4]||(i[4]=f=>K(n)?n.value=!e(n):n=!e(n))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.mailgun_endpoint"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_endpoint.$error&&e(r).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:p.value.mail_mailgun_endpoint,"onUpdate:modelValue":i[7]||(i[7]=f=>p.value.mail_mailgun_endpoint=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:i[8]||(i[8]=f=>e(r).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",la,[t($,{label:I.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.from_mail.$error&&e(r).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:p.value.from_mail,"onUpdate:modelValue":i[9]||(i[9]=f=>p.value.from_mail=f),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(r).mailgunConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,onInput:i[10]||(i[10]=f=>e(r).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.from_name.$error&&e(r).mailgunConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:p.value.from_name,"onUpdate:modelValue":i[11]||(i[11]=f=>p.value.from_name=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_name",onInput:i[12]||(i[12]=f=>e(r).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(_,{loading:I.loading,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(f=>[o.isSaving?G("",!0):(q(),M(m,{key:0,name:"SaveIcon",class:O(f.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},sa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},da={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ma={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ca={__name:"SesMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:D}){const S=D,{t:n}=x(),s=j(["tls","ssl","starttls"]);let a=z(!1);const p=ee(),c=k(()=>p.sesConfig);c.value.mail_driver="ses";const v=k(()=>({sesConfig:{mail_driver:{required:h.withMessage(n("validation.required"),V)},mail_host:{required:h.withMessage(n("validation.required"),V)},mail_port:{required:h.withMessage(n("validation.required"),V),numeric:ne},mail_ses_key:{required:h.withMessage(n("validation.required"),V)},mail_ses_secret:{required:h.withMessage(n("validation.required"),V)},mail_encryption:{required:h.withMessage(n("validation.required"),V)},from_mail:{required:h.withMessage(n("validation.required"),V),email:h.withMessage(n("validation.email_incorrect"),X)},from_name:{required:h.withMessage(n("validation.required"),V)}}})),r=R(v,k(()=>p));async function g(){return r.value.$touch(),r.value.$invalid||S("submit-data",p.sesConfig),!1}function l(){r.value.sesConfig.mail_driver.$touch(),S("on-change-driver",p.sesConfig.mail_driver)}return(I,i)=>{const u=b("BaseMultiselect"),$=b("BaseInputGroup"),C=b("BaseInput"),m=b("BaseIcon"),_=b("BaseButton");return q(),U("form",{onSubmit:T(g,["prevent"])},[B("div",sa,[t($,{label:I.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_driver.$error&&e(r).sesConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(u,{modelValue:c.value.mail_driver,"onUpdate:modelValue":[i[0]||(i[0]=f=>c.value.mail_driver=f),l],options:e(p).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData,invalid:e(r).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.host"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_host.$error&&e(r).sesConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:c.value.mail_host,"onUpdate:modelValue":i[1]||(i[1]=f=>c.value.mail_host=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_host.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_host",onInput:i[2]||(i[2]=f=>e(r).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",da,[t($,{label:I.$t("wizard.mail.port"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_port.$error&&e(r).sesConfig.mail_port.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:c.value.mail_port,"onUpdate:modelValue":i[3]||(i[3]=f=>c.value.mail_port=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_port.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_port",onInput:i[4]||(i[4]=f=>e(r).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.encryption"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_encryption.$error&&e(r).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:d(()=>[t(u,{modelValue:c.value.mail_encryption,"onUpdate:modelValue":i[5]||(i[5]=f=>c.value.mail_encryption=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_encryption.$error,options:s,"content-loading":o.isFetchingInitialData,onInput:i[6]||(i[6]=f=>e(r).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ua,[t($,{label:I.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.from_mail.$error&&e(r).sesConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:c.value.from_mail,"onUpdate:modelValue":i[7]||(i[7]=f=>c.value.from_mail=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_mail",onInput:i[8]||(i[8]=f=>e(r).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.from_name.$error&&e(r).sesConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:c.value.from_name,"onUpdate:modelValue":i[9]||(i[9]=f=>c.value.from_name=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"name",onInput:i[10]||(i[10]=f=>e(r).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ma,[t($,{label:I.$t("wizard.mail.ses_key"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_ses_key.$error&&e(r).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:c.value.mail_ses_key,"onUpdate:modelValue":i[11]||(i[11]=f=>c.value.mail_ses_key=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_ses_key.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:i[12]||(i[12]=f=>e(r).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.ses_secret"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_ses_secret.$error&&e(r).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:d(()=>[t(C,{modelValue:c.value.mail_ses_secret,"onUpdate:modelValue":i[15]||(i[15]=f=>c.value.mail_ses_secret=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_ses_secret.$error,type:I.getInputType,"content-loading":o.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:i[16]||(i[16]=f=>e(r).sesConfig.mail_ses_secret.$touch())},{right:d(()=>[e(a)?(q(),M(m,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:i[13]||(i[13]=f=>K(a)?a.value=!e(a):a=!e(a))})):(q(),M(m,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:i[14]||(i[14]=f=>K(a)?a.value=!e(a):a=!e(a))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(_,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(f=>[o.isSaving?G("",!0):(q(),M(m,{key:0,name:"SaveIcon",class:O(f.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},ga={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},va={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ce={__name:"BasicMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:D}){const S=D,{t:n}=x(),s=ee(),a=k(()=>s.basicMailConfig);k(()=>s.mail_drivers),a.value.mail_driver="mail";const p=k(()=>({basicMailConfig:{mail_driver:{required:h.withMessage(n("validation.required"),V)},from_mail:{required:h.withMessage(n("validation.required"),V),email:h.withMessage(n("validation.email_incorrect"),X)},from_name:{required:h.withMessage(n("validation.required"),V)}}})),c=R(p,k(()=>s));function v(){return c.value.$touch(),c.value.$invalid||S("submit-data",s.basicMailConfig),!1}function r(){var g;c.value.basicMailConfig.mail_driver.$touch(),S("on-change-driver",(g=s==null?void 0:s.basicMailConfig)==null?void 0:g.mail_driver)}return(g,l)=>{const I=b("BaseMultiselect"),i=b("BaseInputGroup"),u=b("BaseInput"),$=b("BaseIcon"),C=b("BaseButton");return q(),U("form",{onSubmit:T(v,["prevent"])},[B("div",ga,[t(i,{label:g.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(c).basicMailConfig.mail_driver.$error&&e(c).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(I,{modelValue:a.value.mail_driver,"onUpdate:modelValue":[l[0]||(l[0]=m=>a.value.mail_driver=m),r],invalid:e(c).basicMailConfig.mail_driver.$error,options:e(s).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",va,[t(i,{label:g.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(c).basicMailConfig.from_name.$error&&e(c).basicMailConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(u,{modelValue:a.value.from_name,"onUpdate:modelValue":l[1]||(l[1]=m=>a.value.from_name=m),modelModifiers:{trim:!0},invalid:e(c).basicMailConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"name",onInput:l[2]||(l[2]=m=>e(c).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t(i,{label:g.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(c).basicMailConfig.from_mail.$error&&e(c).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(u,{modelValue:a.value.from_mail,"onUpdate:modelValue":l[3]||(l[3]=m=>a.value.from_mail=m),modelModifiers:{trim:!0},invalid:e(c).basicMailConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",onInput:l[4]||(l[4]=m=>e(c).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(C,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(m=>[o.isSaving?G("",!0):(q(),M($,{key:0,name:"SaveIcon",class:O(m.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(g.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},pa={components:{Smtp:na,Mailgun:ra,Ses:ca,sendmail:ce,Mail:ce},emits:["next"],setup(o,{emit:D}){const S=z(!1),n=z(!1),s=ee();s.mail_driver="mail",p();function a(v){s.mail_driver=v}async function p(){n.value=!0,await s.fetchMailDrivers(),n.value=!1}async function c(v){S.value=!0;let r=await s.updateMailConfig(v);S.value=!1,r.data.success&&await D("next",5)}return{mailDriverStore:s,isSaving:S,isFetchingInitialData:n,changeDriver:a,next:c}}};function fa(o,D,S,n,s,a){const p=b("BaseWizardStep");return q(),M(p,{title:o.$t("wizard.mail.mail_config"),description:o.$t("wizard.mail.mail_config_desc")},{default:d(()=>[B("form",{action:"",onSubmit:D[1]||(D[1]=T((...c)=>n.next&&n.next(...c),["prevent"]))},[(q(),M(ue(n.mailDriverStore.mail_driver),{"config-data":n.mailDriverStore.mailConfigData,"is-saving":n.isSaving,"is-fetching-initial-data":n.isFetchingInitialData,onOnChangeDriver:D[0]||(D[0]=c=>n.changeDriver(c)),onSubmitData:n.next},null,40,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}var _a=se(pa,[["render",fa]]);const ba={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},$a={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},wa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ya={__name:"Step6AccountSettings",emits:["next"],setup(o,{emit:D}){const S=D;let n=z(!1);const s=z(!1),a=z(!1);let p=z(""),c=z(null);const v=ve(),r=ae(),{t:g}=x(),l=k(()=>v.userForm),I=k(()=>({userForm:{name:{required:h.withMessage(g("validation.required"),V)},email:{required:h.withMessage(g("validation.required"),V),email:h.withMessage(g("validation.email_incorrect"),X)},password:{required:h.withMessage(g("validation.required"),V),minLength:h.withMessage(g("validation.password_min_length",{count:8}),be(8))},confirm_password:{required:h.withMessage(g("validation.required"),$e(v.userForm.password)),sameAsPassword:h.withMessage(g("validation.password_incorrect"),we(v.userForm.password))}}})),i=R(I,k(()=>v));function u(m,_){c.value=_}function $(){c.value=null}async function C(){if(i.value.userForm.$touch(),i.value.userForm.$invalid)return!0;n.value=!0;let m=await v.updateCurrentUser(l.value);if(n.value=!1,m.data.data){if(c.value){let f=new FormData;f.append("admin_avatar",c.value),await v.uploadAvatar(f)}const _=m.data.data.companies[0];await r.setSelectedCompany(_),S("next",6)}}return(m,_)=>{const f=b("BaseFileUploader"),w=b("BaseInputGroup"),y=b("BaseInput"),L=b("EyeOffIcon"),Z=b("EyeIcon"),J=b("BaseIcon"),H=b("BaseButton"),E=b("BaseWizardStep");return q(),M(E,{title:m.$t("wizard.account_info"),description:m.$t("wizard.account_info_desc")},{default:d(()=>[B("form",{action:"",onSubmit:T(C,["prevent"])},[B("div",ba,[t(w,{label:m.$tc("settings.account_settings.profile_picture")},{default:d(()=>[t(f,{avatar:!0,"preview-image":e(p),onChange:u,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),B("div",$a,[t(w,{label:m.$t("wizard.name"),error:e(i).userForm.name.$error&&e(i).userForm.name.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:l.value.name,"onUpdate:modelValue":_[0]||(_[0]=F=>l.value.name=F),modelModifiers:{trim:!0},invalid:e(i).userForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=F=>e(i).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(w,{label:m.$t("wizard.email"),error:e(i).userForm.email.$error&&e(i).userForm.email.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:l.value.email,"onUpdate:modelValue":_[2]||(_[2]=F=>l.value.email=F),modelModifiers:{trim:!0},invalid:e(i).userForm.email.$error,type:"text",name:"email",onInput:_[3]||(_[3]=F=>e(i).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),B("div",wa,[t(w,{label:m.$t("wizard.password"),error:e(i).userForm.password.$error&&e(i).userForm.password.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:l.value.password,"onUpdate:modelValue":_[6]||(_[6]=F=>l.value.password=F),modelModifiers:{trim:!0},invalid:e(i).userForm.password.$error,type:s.value?"text":"password",name:"password",onInput:_[7]||(_[7]=F=>e(i).userForm.password.$touch())},{right:d(()=>[s.value?(q(),M(L,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[4]||(_[4]=F=>s.value=!s.value)})):(q(),M(Z,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[5]||(_[5]=F=>s.value=!s.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),t(w,{label:m.$t("wizard.confirm_password"),error:e(i).userForm.confirm_password.$error&&e(i).userForm.confirm_password.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:l.value.confirm_password,"onUpdate:modelValue":_[10]||(_[10]=F=>l.value.confirm_password=F),modelModifiers:{trim:!0},invalid:e(i).userForm.confirm_password.$error,type:a.value?"text":"password",name:"confirm_password",onInput:_[11]||(_[11]=F=>e(i).userForm.confirm_password.$touch())},{right:d(()=>[a.value?(q(),M(J,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[8]||(_[8]=F=>a.value=!a.value)})):(q(),M(J,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[9]||(_[9]=F=>a.value=!a.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),t(H,{loading:e(n),disabled:e(n),class:"mt-4"},{left:d(F=>[e(n)?G("",!0):(q(),M(J,{key:0,name:"SaveIcon",class:O(F.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(m.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},ha={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Ia={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},qa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ca={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Ba={__name:"Step7CompanyInfo",emits:["next"],setup(o,{emit:D}){const S=D;let n=z(!1),s=z(!1);const{t:a}=x();let p=z(null),c=z(null),v=z(null);const r=j({name:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),g=ae(),l=pe();Q(async()=>{var m;n.value=!0,await l.fetchCountries(),n.value=!1,r.address.country_id=(m=l.countries.find(_=>_.code=="US"))==null?void 0:m.id});const I={companyForm:{name:{required:h.withMessage(a("validation.required"),V)},address:{country_id:{required:h.withMessage(a("validation.required"),V)},address_street_1:{maxLength:h.withMessage(a("validation.address_maxlength",{count:255}),me(255))},address_street_2:{maxLength:h.withMessage(a("validation.address_maxlength",{count:255}),me(255))}}}},i=R(I,{companyForm:r});function u(m,_,f,w){v.value=w.name,c.value=_}function $(){c.value=null}async function C(){if(i.value.companyForm.$touch(),i.value.$invalid)return!0;if(s.value=!0,g.updateCompany(r)){if(c.value){let _=new FormData;_.append("company_logo",JSON.stringify({name:v.value,data:c.value})),await g.updateCompanyLogo(_)}s.value=!1,S("next",7)}}return(m,_)=>{const f=b("BaseFileUploader"),w=b("BaseInputGroup"),y=b("BaseInput"),L=b("BaseMultiselect"),Z=b("BaseTextarea"),J=b("BaseIcon"),H=b("BaseButton"),E=b("BaseWizardStep");return q(),M(E,{title:m.$t("wizard.company_info"),description:m.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[B("form",{action:"",onSubmit:T(C,["prevent"])},[B("div",ha,[t(w,{label:m.$tc("settings.company_info.company_logo")},{default:d(()=>[t(f,{base64:"","preview-image":e(p),onChange:u,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),B("div",Ia,[t(w,{label:m.$t("wizard.company_name"),error:e(i).companyForm.name.$error&&e(i).companyForm.name.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:r.name,"onUpdate:modelValue":_[0]||(_[0]=F=>r.name=F),modelModifiers:{trim:!0},invalid:e(i).companyForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=F=>e(i).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(w,{label:m.$t("wizard.country"),error:e(i).companyForm.address.country_id.$error&&e(i).companyForm.address.country_id.$errors[0].$message,"content-loading":e(n),required:""},{default:d(()=>[t(L,{modelValue:r.address.country_id,"onUpdate:modelValue":_[2]||(_[2]=F=>r.address.country_id=F),label:"name",invalid:e(i).companyForm.address.country_id.$error,options:e(l).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(n),placeholder:m.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),B("div",qa,[t(w,{label:m.$t("wizard.state")},{default:d(()=>[t(y,{modelValue:r.address.state,"onUpdate:modelValue":_[3]||(_[3]=F=>r.address.state=F),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:m.$t("wizard.city")},{default:d(()=>[t(y,{modelValue:r.address.city,"onUpdate:modelValue":_[4]||(_[4]=F=>r.address.city=F),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),B("div",Ca,[B("div",null,[t(w,{label:m.$t("wizard.address"),error:e(i).companyForm.address.address_street_1.$error&&e(i).companyForm.address.address_street_1.$errors[0].$message},{default:d(()=>[t(Z,{modelValue:r.address.address_street_1,"onUpdate:modelValue":_[5]||(_[5]=F=>r.address.address_street_1=F),modelModifiers:{trim:!0},invalid:e(i).companyForm.address.address_street_1.$error,placeholder:m.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:_[6]||(_[6]=F=>e(i).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),t(w,{error:e(i).companyForm.address.address_street_2.$error&&e(i).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:d(()=>[t(Z,{modelValue:r.address.address_street_2,"onUpdate:modelValue":_[7]||(_[7]=F=>r.address.address_street_2=F),invalid:e(i).companyForm.address.address_street_2.$error,placeholder:m.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:_[8]||(_[8]=F=>e(i).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),B("div",null,[t(w,{label:m.$t("wizard.zip_code")},{default:d(()=>[t(y,{modelValue:r.address.zip,"onUpdate:modelValue":_[9]||(_[9]=F=>r.address.zip=F),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:m.$t("wizard.phone"),class:"mt-4"},{default:d(()=>[t(y,{modelValue:r.address.phone,"onUpdate:modelValue":_[10]||(_[10]=F=>r.address.phone=F),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])])]),t(H,{loading:e(s),disabled:e(s),class:"mt-4"},{left:d(F=>[e(s)?G("",!0):(q(),M(J,{key:0,name:"SaveIcon",class:O(F.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(m.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},Va={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Da={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Sa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Fa={__name:"Step8CompanyPreferences",emits:["next"],setup(o,{emit:D}){const S=D,n=z(!1);let s=z(!1),a=j({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:p,t:c}=x(),v=fe();s.value=!0,j([{title:p("settings.customization.invoices.allow"),value:"allow"},{title:p("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:p("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:p("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const r=ge(),g=pe(),l=ae(),I=ve(),i=de();let u={key:"fiscal_years"},$={key:"languages"};s.value=!0,Promise.all([g.fetchCurrencies(),g.fetchDateFormats(),g.fetchTimeZones(),g.fetchCountries(),g.fetchConfig(u),g.fetchConfig($)]).then(([f])=>{s.value=!1});const C=k(()=>({currentPreferences:{currency:{required:h.withMessage(c("validation.required"),V)},language:{required:h.withMessage(c("validation.required"),V)},carbon_date_format:{required:h.withMessage(c("validation.required"),V)},time_zone:{required:h.withMessage(c("validation.required"),V)},fiscal_year:{required:h.withMessage(c("validation.required"),V)}}})),m=R(C,{currentPreferences:a});async function _(){if(m.value.currentPreferences.$touch(),m.value.$invalid)return!0;r.openDialog({title:c("general.do_you_wish_to_continue"),message:c("wizard.currency_set_alert"),yesLabel:c("general.ok"),noLabel:c("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async f=>{if(f){let w={settings:{...a}};n.value=!0,delete w.settings.discount_per_item;let y=await l.updateCompanySettings({data:w});if(y.data){n.value=!1;let L={settings:{language:a.language}};(await I.updateUserSettings(L)).data&&(S("next","COMPLETED"),i.showNotification({type:"success",message:"Login Successful"}),v.push("/admin/dashboard")),ye.set("auth.token",y.data.token)}return!0}return n.value=!1,!0})}return(f,w)=>{const y=b("BaseMultiselect"),L=b("BaseInputGroup"),Z=b("BaseIcon"),J=b("BaseButton"),H=b("BaseWizardStep");return q(),M(H,{title:f.$t("wizard.preferences"),description:f.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[B("form",{action:"",onSubmit:T(_,["prevent"])},[B("div",null,[B("div",Va,[t(L,{label:f.$t("wizard.currency"),error:e(m).currentPreferences.currency.$error&&e(m).currentPreferences.currency.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(y,{modelValue:e(a).currency,"onUpdate:modelValue":w[0]||(w[0]=E=>e(a).currency=E),"content-loading":e(s),options:e(g).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:f.$tc("settings.currencies.select_currency"),invalid:e(m).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),t(L,{label:f.$t("settings.preferences.default_language"),error:e(m).currentPreferences.language.$error&&e(m).currentPreferences.language.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(y,{modelValue:e(a).language,"onUpdate:modelValue":w[1]||(w[1]=E=>e(a).language=E),"content-loading":e(s),options:e(g).languages,label:"name","value-prop":"code",placeholder:f.$tc("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,invalid:e(m).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),B("div",Da,[t(L,{label:f.$t("wizard.date_format"),error:e(m).currentPreferences.carbon_date_format.$error&&e(m).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(y,{modelValue:e(a).carbon_date_format,"onUpdate:modelValue":w[2]||(w[2]=E=>e(a).carbon_date_format=E),"content-loading":e(s),options:e(g).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:f.$tc("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(m).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),t(L,{label:f.$t("wizard.time_zone"),error:e(m).currentPreferences.time_zone.$error&&e(m).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(y,{modelValue:e(a).time_zone,"onUpdate:modelValue":w[3]||(w[3]=E=>e(a).time_zone=E),"content-loading":e(s),options:e(g).timeZones,label:"key","value-prop":"value",placeholder:f.$tc("settings.preferences.select_time_zone"),"track-by":"key",searchable:!0,invalid:e(m).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),B("div",Sa,[t(L,{label:f.$t("wizard.fiscal_year"),error:e(m).currentPreferences.fiscal_year.$error&&e(m).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(y,{modelValue:e(a).fiscal_year,"onUpdate:modelValue":w[4]||(w[4]=E=>e(a).fiscal_year=E),"content-loading":e(s),options:e(g).fiscalYears,label:"key","value-prop":"value",placeholder:f.$tc("settings.preferences.select_financial_year"),invalid:e(m).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),t(J,{loading:n.value,disabled:n.value,"content-loading":e(s),class:"mt-4"},{left:d(E=>[t(Z,{name:"SaveIcon",class:O(E.class)},null,8,["class"])]),default:d(()=>[N(" "+P(f.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],32)]),_:1},8,["title","description"])}}};var Ma="/build/img/crater-logo.png";const za={components:{step_1:Ue,step_2:Le,step_3:Ke,step_4:Qe,step_5:_a,step_6:ya,step_7:Ba,step_8:Fa},setup(){let o=z("step_1"),D=z(1);const S=fe(),n=Y();s();async function s(){let v=await n.fetchInstallationStep();if(v.data.profile_complete==="COMPLETED"){S.push("/admin/dashboard");return}let r=parseInt(v.data.profile_complete);r&&(D.value=r+1,o.value=`step_${r+1}`)}async function a(v){var g,l;let r={profile_complete:v};try{return await n.addInstallationStep(r),!0}catch(I){return((l=(g=I==null?void 0:I.response)==null?void 0:g.data)==null?void 0:l.message)==="The MAC is invalid."&&window.location.reload(),!1}}async function p(v){if(v&&!await a(v))return!1;D.value++,D.value<=8&&(o.value="step_"+D.value)}function c(v){}return{stepComponent:o,currentStepNumber:D,onStepChange:p,saveStepProgress:a,onNavClick:c}}},ka={class:"flex flex-col items-center justify-between w-full pt-10"};function Ua(o,D,S,n,s,a){const p=b("BaseWizard");return q(),U("div",ka,[D[0]||(D[0]=B("img",{id:"logo-crater",src:Ma,alt:"Crater Logo",class:"h-12 mb-5 md:mb-10"},null,-1)),t(p,{steps:7,"current-step":n.currentStepNumber,onClick:n.onNavClick},{default:d(()=>[(q(),M(ue(n.stepComponent),{onNext:n.onStepChange},null,40,["onNext"]))]),_:1},8,["current-step","onClick"])])}var Ea=se(za,[["render",Ua]]);export{Ea as default};
